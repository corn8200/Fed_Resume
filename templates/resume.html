<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ r.contact.name }} — Federal Résumé</title>
    <style>
      @page { size: Letter; margin: 0.5in; }
      :root { --muted: #555; }
      html, body { height: 100%; }
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        font-size: 10pt; line-height: 1.25; color: #000;
        margin: 0;
      }
      .page { padding: 0.5in; }
      h1 { font-size: 14pt; margin: 0 0 4px 0; }
      h2 { font-size: 12pt; margin: 10px 0 6px 0; padding-bottom: 3px; border-bottom: 1px solid #ddd; }
      h3 { font-size: 10.5pt; margin: 0 0 2px 0; }
      .muted { color: var(--muted); }
      .row { display: flex; gap: 12px; align-items: baseline; flex-wrap: wrap; }
      .header { display: flex; justify-content: space-between; gap: 16px; }
      .header-left { flex: 1 1 auto; }
      .header-right { flex: 0 0 auto; text-align: right; }
      .links a { color: inherit; text-decoration: none; }
      .links a:hover { text-decoration: underline; }
      .section { margin-top: 8px; }
      .entry { margin: 6px 0; }
      .avoid-break { break-inside: avoid; page-break-inside: avoid; }
      .meta, .supervisor { margin: 2px 0; }
      ul { margin: 4px 0 0 18px; padding: 0; }
      li { margin: 2px 0; }
      .chips { display: flex; gap: 6px; flex-wrap: wrap; }
      .chip { border: 1px solid #ccc; padding: 1px 6px; border-radius: 10px; font-size: 9pt; }
      .print-btn { position: sticky; top: 0; background: #fff; border: 1px solid #ccc; padding: 6px 10px; border-radius: 4px; cursor: pointer; }
      .topbar { position: sticky; top: 0; display: flex; justify-content: end; padding: 6px 0; background: rgba(255,255,255,0.9); }
      .kv { display: inline-flex; gap: 8px; flex-wrap: wrap; font-size: 9.5pt; }
      .kv b { font-weight: 600; }
      @media print {
        .no-print { display: none !important; }
        .topbar { display: none !important; }
        .page { padding: 0; }
      }
    </style>
  </head>
  <body>
    <div class="topbar no-print">
      <button class="print-btn" onclick="window.print()">Print / Save as PDF</button>
    </div>
    <div class="page">
      <header class="header">
        <div class="header-left">
          <h1>{{ r.contact.name }}</h1>
          <div class="row muted" style="font-size: 9.5pt;">
            <div>{{ r.contact.email }}</div>
            <div>•</div>
            <div>{{ r.contact.phone }}</div>
            {% if r.contact.location %}
              <div>•</div>
              <div>{{ r.contact.location }}</div>
            {% endif %}
          </div>
          {% if r.citizenship or r.veterans_preference or r.eligibilities %}
          <div class="kv muted">
            {% if r.citizenship %}<div><b>Citizenship:</b> {{ r.citizenship }}</div>{% endif %}
            {% if r.veterans_preference %}<div><b>Veterans’ Preference:</b> {{ r.veterans_preference }}</div>{% endif %}
            {% if r.eligibilities %}<div><b>Hiring Eligibility:</b> {{ r.eligibilities | join(', ') }}</div>{% endif %}
          </div>
          {% endif %}
        </div>
        {% if r.contact.links %}
        <div class="header-right links" style="font-size: 9.5pt;">
          {% for label, url in r.contact.links.items() %}
            <div><strong>{{ label }}:</strong> <a href="{{ url }}">{{ url }}</a></div>
          {% endfor %}
        </div>
        {% endif %}
      </header>

      {% if r.summary %}
      <section class="section">
        <h2>Summary</h2>
        <p class="entry" style="margin: 4px 0 0 0;">{{ r.summary }}</p>
      </section>
      {% endif %}

      {% if r.work %}
      <section class="section">
        <h2>Work Experience</h2>
        {% for w in r.work %}
        <div class="entry avoid-break">
          <h3>
            {{ w.title }}
            {% if w.series_grade %}
              <span class="muted">({{ w.series_grade }})</span>
            {% endif %}
          </h3>
          <div class="muted">{{ w.employer }}{% if w.location %}, {{ w.location }}{% endif %}</div>
          {% if w.address %}
            <div class="muted">{{ w.address }}</div>
          {% endif %}
          <div class="meta muted">
            {{ w.start|fmtdate }} – {{ 'Present' if w.present else (w.end|fmtdate) }}
            • {{ w.hours_per_week }} hrs/week
            {% if w.salary %} • {{ w.salary }}{% endif %}
          </div>
          {% if w.supervisor or (w.can_contact_supervisor is not none) %}
          <div class="supervisor muted">
            Supervisor: {{ w.supervisor if w.supervisor else '—' }}
            {% if w.can_contact_supervisor is not none %}
              — OK to contact: {{ 'Yes' if w.can_contact_supervisor else 'No' }}
            {% endif %}
          </div>
          {% endif %}
          {% if w.duties %}
          <div class="muted" style="margin-top: 2px;">Duties: {{ w.duties }}</div>
          {% endif %}
          {% if w.highlights %}
          <ul>
            {% for h in w.highlights %}
              <li>{{ h }}</li>
            {% endfor %}
          </ul>
          {% endif %}
        </div>
        {% endfor %}
      </section>
      {% endif %}

      {% if r.education %}
      <section class="section">
        <h2>Education</h2>
        {% for e in r.education %}
        <div class="entry avoid-break">
          <div><strong>{{ e.institution }}</strong>{% if e.location %}, <span class="muted">{{ e.location }}</span>{% endif %}</div>
          <div>
            {{ e.degree }}{% if e.field %}, {{ e.field }}{% endif %}
            {% if e.gpa %} — GPA: {{ e.gpa }}{% endif %}
          </div>
          {% if e.completion_date %}
            <div class="muted">{{ e.completion_date }}</div>
          {% endif %}
        </div>
        {% endfor %}
      </section>
      {% endif %}

      {% if r.certifications %}
      <section class="section">
        <h2>Certifications / Licensures</h2>
        <ul>
          {% for c in r.certifications %}
            <li>{{ c }}</li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if r.training %}
      <section class="section">
        <h2>Training</h2>
        <ul>
          {% for t in r.training %}
            <li>{{ t }}</li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if r.languages %}
      <section class="section">
        <h2>Languages</h2>
        <div class="chips">
          {% for lang in r.languages %}
            <span class="chip">{{ lang }}</span>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      {% if r.clearances %}
      <section class="section">
        <h2>Clearances</h2>
        <ul>
          {% for cl in r.clearances %}
            <li>{{ cl }}</li>
          {% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if r.volunteer %}
      <section class="section">
        <h2>Volunteer Experience</h2>
        {% for v in r.volunteer %}
        <div class="entry avoid-break">
          <div><strong>{{ v.organization }}</strong>{% if v.location %}, <span class="muted">{{ v.location }}</span>{% endif %}</div>
          <div class="muted">{{ v.role }}</div>
          <div class="meta muted">{{ v.start|fmtdate }} – {{ 'Present' if v.present else (v.end|fmtdate) }}</div>
          {% if v.highlights %}
          <ul>
            {% for h in v.highlights %}<li>{{ h }}</li>{% endfor %}
          </ul>
          {% endif %}
        </div>
        {% endfor %}
      </section>
      {% endif %}

      {% if r.awards %}
      <section class="section">
        <h2>Awards</h2>
        <ul>
          {% for a in r.awards %}<li>{{ a }}</li>{% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if r.publications %}
      <section class="section">
        <h2>Publications</h2>
        <ul>
          {% for p in r.publications %}<li>{{ p }}</li>{% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if r.affiliations %}
      <section class="section">
        <h2>Professional Affiliations</h2>
        <ul>
          {% for af in r.affiliations %}<li>{{ af }}</li>{% endfor %}
        </ul>
      </section>
      {% endif %}

      {% if r.references %}
      <section class="section">
        <h2>References</h2>
        {% for ref in r.references %}
        <div class="entry avoid-break">
          {{ ref.name }} — {{ ref.phone }}{% if ref.email %} — {{ ref.email }}{% endif %}
        </div>
        {% endfor %}
      </section>
      {% endif %}
    </div>
  </body>
  </html>
